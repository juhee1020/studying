<%@page import="java.sql.*"%>
<%@page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<!DOCTYPE html>
<%
	request.setCharacterEncoding("utf-8");	
	String id=request.getParameter("id");
	String pw=request.getParameter("pw");
	String name=request.getParameter("name");
	String email=request.getParameter("email");

	String URL="jdbc:mariadb://localhost:3306/jspstudy";
	String USR="root";
	String PWD="12345";

	String sql = "update member set password='"+pw+
			"', name='"+name+"', email='"+email+"' where id='"+id+"'";

	Class.forName("org.mariadb.jdbc.Driver");
	
	Connection conn=null;
	PreparedStatement pstmt=null;
	//ResultSet  rs=null;
	
	try{
		conn=DriverManager.getConnection(URL, USR, PWD);
		pstmt=conn.prepareStatement(sql);

		
		//pstmt.setString(2, pw);
		//pstmt.setString(3, name);
		//pstmt.setString(4, email);
		pstmt.executeUpdate();


		}catch(Exception e){
			out.write("<h3 class='bg-danger text-white'>DB 접속실패</h3>");
		}finally{
			try{
				//if(rs!=null)rs.close();
				if(pstmt!=null)pstmt.close();
				if(conn!=null)conn.close();
			}catch(Exception e){
				// 더미
			}
		}	
	
%>
<html>
<head>
    <meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">	
  	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>
<body>
	<div class="container">
		<h1>회원수정</h1>
		<% if(!pstmt.executeUpdate()){%><h3>수정실패</h3><%}else{%><h3>수정성공</h3><%} %>
		<%= id %><br>
		<%= pw %><br>
		<%= name %><br>
		<%= email %><br>
	</div>
</body>
</html>